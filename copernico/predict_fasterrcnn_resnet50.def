Bootstrap: docker
From: python:3.12.3-slim-bookworm

%files
    requirements.txt /app/requirements.txt

%post
    apt update && apt install -y ffmpeg
    python -m venv /app/.venv
    cd /app
    /app/.venv/bin/pip3 install --root-user-action=ignore --upgrade pip
    /app/.venv/bin/pip3 install --root-user-action=ignore -r requirements.txt

%runscript
    /app/.venv/bin/python src/predict.py fasterrcnn_resnet50 fasterrcnn_resnet50.pth input.avi output-fasterrcnn_resnet50.mp4
